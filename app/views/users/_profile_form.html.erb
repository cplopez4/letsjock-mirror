<div class="header-buttons">
    <a><button class="btn-success hito-click" data-block="train">
        <i class="icon-user icon-2x"></i>
        Training
    </button></a>
    <a><button class="btn-success hito-click" data-block="team">
        <i class="icon-group icon-2x"></i>
        Team
    </button></a>
    <a><button class="btn-success hito-click" data-block="recognition">
        <i class="icon-trophy icon-2x"></i>
        Award
    </button></a>
    <a><button class="btn-success hito-click" data-block="result">
        <i class="icon-star icon-2x"></i>
        Result
    </button></a>
</div>

<%= form_tag({:controller => 'users', :action => 'add_new'}, :id => @edit_profile ? 'edit-profile-entry' : 'new-profile-entry') do  %>
<fieldset>
<%= hidden_field_tag :user_id, current_user.id %>

    <div class="input-prepend _js-sport">
        <span class="add-on"><i class="icon-circle-blank"></i></span>
    <% if @edit_profile %>
        <%= hidden_field_tag :edit_profile, true %>
        <%= hidden_field_tag :sport_id, @sport_id %>
        <%= text_field_tag :sport_name, Sport.find(@sport_id).name, :readonly => true %>
    <% else %>
        <%= select_tag :sport_id, options_for_select(@sports.map{ |s| [s.name, s.id] }), :prompt => 'Select a sport', :id => "select-sport" %>
    <% end %>
    </div>

    <div class="<% unless @train.id? %>hiddenDiv<% end %> input-prepend _js-train">
        <span class="add-on"><i class="icon-user"></i></span>
        <select>
          <option>Trained by</option>
        </select>
        <%= hidden_field_tag :train_id, @train.id if @train.id? %>
        <%= text_field_tag :train_name, @train.name, :placeholder => "Trainer Name" %>
    </div>
    
    <div class="<% unless @team.id? %>hiddenDiv<% end %> input-prepend input-append _js-team">
        <span class="add-on"><i class="icon-group"></i></span>
        <%= hidden_field_tag :team_id, @team.id if @team.id? %>
        <%= text_field_tag :team_name, @team.name, :placeholder => "Team Name" %>
        <%= text_field_tag :team_category, @team.category, :placeholder => "Category" %>
    </div>
    
    <div class="<% unless @recognition.id? %>hiddenDiv<% end %> input-prepend input-append _js-recognition">
        <span class="add-on"><i class="icon-trophy"></i></span>
        <%= hidden_field_tag :recognition_id, @recognition.id if @recognition.id? %>
        <%= text_field_tag :recognition_title, @recognition.description, :placeholder => "Award Title" %>
        <%= text_field_tag :recognition_by, @recognition.awarded_by, :placeholder => "Awarded By" %>
    </div>
    
    <div class="<% unless @competition.id? %>hiddenDiv<% end %> input-prepend _js-result">
        <span class="add-on"><i class="icon-star"></i></span>
        <div class="input-append input-prepend">
            <%= hidden_field_tag :competition_id, @competition.id if @competition.id? %>
            <%= text_field_tag :competition_name, @competition.name, :placeholder => "Competition Name" %>
            
            <%= hidden_field_tag :result_id, @result.id if @result.id? %>
            <%= text_field_tag :result_position, @result.position, :placeholder => "Position", :class=> "span1" %>
            <%= text_field_tag :result_value, @result.value, :placeholder => "Mark and unit", :style => "width: 100px;" %>
        </div>
        <%= hidden_field_tag :result_var, 's'  %>
    </div>

    <div id="divDate" class="input-prepend">
        <div class="input-prepend date" id="dp3" data-date="12-02-2012" data-date-format="dd-mm-yyyy" data-date-viewmode = "years">
            <span class="add-on"><i class="icon-calendar"></i></span>
            <%= text_field_tag :init, @init, :placeholder => "Date from", :class => "span2"%>
        </div>
        <div class="input-prepend date" id="dp4" data-date="12-02-2012" data-date-format="dd-mm-yyyy" data-date-viewmode = "years">
            <span class="add-on"><i class="icon-calendar"></i></span>
            <%= text_field_tag :end, @end, :placeholder => "Date to", :class => "span2" %>
        </div>
    </div>

    <script>
        !function ($) {
            $(function(){
                $('#dp3').datepicker();
                $('#dp4').datepicker();
                
                $(".hiddenDiv").hide();
                
                $(".hito-click").click(function(){
                    $(this).toggleClass("active");
                    $('._js-' + $(this).attr("data-block")).toggle("normal");
                });
                
                $('.btn-cancel').click(function(e){
                    e.preventDefault();
                    
                    if($(this).parents(".accordion-body").length)
                        $("a[href=#" + $(this).parents(".accordion-body").attr("id") + "]").click();
                    else{
                        $(".resume:hidden ul.experience").parent().toggle("normal");
                        $(this).parents(".async-form").toggle("fast").empty();
                    }
                });
            });
        }(window.jQuery)
    </script>
</fieldset>

<button class="btn pull-right btn-cancel">Cancel</button>
<button type="submit" class="btn btn-success pull-right"><b>Save</b></button>
    
<div class="clearfix"></div>

<%  end %>